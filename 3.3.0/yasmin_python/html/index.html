<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Python YASMIN (Yet Another State MachINe): YASMIN (Yet Another State MachINe)</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Python YASMIN (Yet Another State MachINe)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">YASMIN (Yet Another State MachINe) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p align="center"></p>
<p><img src="./docs/logo.png" alt="" width="50%" class="inline"/> </p>
<p><b>YASMIN</b> is a project focused on implementing robot behaviors using Finite State Machines (FSM). It is available for ROS 2, Python and C++.</p>
<div align="center"></div><div align="center"><a href="https://opensource.org/license/gpl-3-0"><img src="https://img.shields.io/badge/GitHub-GPL--3.0-informational" alt="License: MIT" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/releases"><img src="https://img.shields.io/github/release/uleroboticsgroup/yasmin.svg" alt="GitHub release" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin?branch=main"><img src="https://img.shields.io/github/languages/code-size/uleroboticsgroup/yasmin.svg?branch=main" alt="Code Size" style="pointer-events: none;" class="inline"/></a> <a href="https://libraries.io/github/uleroboticsgroup/yasmin?branch=main"><img src="https://img.shields.io/librariesio/github/uleroboticsgroup/yasmin?branch=main" alt="Dependencies" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/commits/main"><img src="https://img.shields.io/github/last-commit/uleroboticsgroup/yasmin.svg" alt="Last Commit" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/issues"><img src="https://img.shields.io/github/issues/uleroboticsgroup/yasmin" alt="GitHub issues" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/pulls"><img src="https://img.shields.io/github/issues-pr/uleroboticsgroup/yasmin" alt="GitHub pull requests" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/graphs/contributors"><img src="https://img.shields.io/github/contributors/uleroboticsgroup/yasmin.svg" alt="Contributors" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/python-formatter.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/python-formatter.yml/badge.svg?branch=main" alt="Python Formatter Check" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/cpp-formatter.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/cpp-formatter.yml/badge.svg?branch=main" alt="C++ Formatter Check" style="pointer-events: none;" class="inline"/></a></div><div align="center"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">ROS 2 Distro   </th><th class="markdownTableHeadCenter">Branch   </th><th class="markdownTableHeadCenter">Build status   </th><th class="markdownTableHeadCenter">Docker Image   </th><th class="markdownTableHeadNone">Documentation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Foxy</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/foxy-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/foxy-docker-build.yml/badge.svg?branch=main" alt="Foxy Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=foxy"><img src="https://img.shields.io/badge/Docker%20Image%20-foxy-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Galatic</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/galactic-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/galactic-docker-build.yml/badge.svg?branch=main" alt="Galactic Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=galactic"><img src="https://img.shields.io/badge/Docker%20Image%20-galactic-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Humble</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/humble-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/humble-docker-build.yml/badge.svg?branch=main" alt="Humble Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=humble"><img src="https://img.shields.io/badge/Docker%20Image%20-humble-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Iron</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/iron-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/iron-docker-build.yml/badge.svg?branch=main" alt="Iron Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=iron"><img src="https://img.shields.io/badge/Docker%20Image%20-iron-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Jazzy</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/jazzy-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/jazzy-docker-build.yml/badge.svg?branch=main" alt="Jazzy Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=jazzy"><img src="https://img.shields.io/badge/Docker%20Image%20-jazzy-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Kilted</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/kilted-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/kilted-docker-build.yml/badge.svg?branch=main" alt="Kilted Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=kilted"><img src="https://img.shields.io/badge/Docker%20Image%20-kilted-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Rolling</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/uleroboticsgroup/yasmin/actions/workflows/rolling-docker-build.yml?branch=main"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/rolling-docker-build.yml/badge.svg?branch=main" alt="Rolling Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yasmin/tags?name=rolling"><img src="https://img.shields.io/badge/Docker%20Image%20-rolling-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://uleroboticsgroup.github.io/yasmin/latest"><img src="https://github.com/uleroboticsgroup/yasmin/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>   </td></tr>
</table>
</div><div align="center"></div><h1><a class="anchor" id="autotoc_md1"></a>
Table of Contents</h1>
<ol type="1">
<li>Features</li>
<li>Installation</li>
<li>Docker</li>
<li>Demos<ul>
<li>Python</li>
<li>Cpp</li>
</ul>
</li>
<li>YASMIN Viewer</li>
<li>Citations</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Key Features</h1>
<ul>
<li><b>ROS 2 Integration</b>: Integrates with ROS 2 for easy deployment and interaction.</li>
<li><b>Support for Python and C++</b>: Available for both Python and C++, making it flexible for a variety of use cases.</li>
<li><b>Rapid Prototyping</b>: Designed for fast prototyping, allowing quick iteration of state machine behaviors.</li>
<li><b>Predefined States</b>: Includes states for interacting with ROS 2 action clients, service clients, and topics.</li>
<li><b>Data Sharing with Blackboards</b>: Utilizes blackboards for data sharing between states and state machines.</li>
<li><b>State Management</b>: Supports cancellation and stopping of state machines, including halting the current executing state.</li>
<li><b>Web Viewer</b>: Features an integrated web viewer for real-time monitoring of state machine execution.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Debian Packages</h2>
<p>To install YASMIN and its packages, use the following command:</p>
<div class="fragment"><div class="line">sudo apt install ros-$ROS_DISTRO-yasmin ros-$ROS_DISTRO-yasmin-*</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Building from Source</h2>
<p>Follow these steps to build the source code from this repository:</p>
<div class="fragment"><div class="line">cd ~/ros2_ws/src</div>
<div class="line">git clone https://github.com/uleroboticsgroup/yasmin.git</div>
<div class="line">cd ~/ros2_ws</div>
<div class="line">rosdep install --from-paths src --ignore-src -r -y</div>
<div class="line">cd ~/ros2_ws</div>
<div class="line">colcon build</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
Note for Deprecated or Rolling ROS 2 Distros</h3>
<p>If you are using a deprecated ROS 2 distribution (e.g., Foxy or Galactic) or the Rolling distribution, install the example interfaces:</p>
<div class="fragment"><div class="line">sudo apt install -y ros-$ROS_DISTRO-example-interfaces</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Docker</h1>
<p>If your operating system doesn't support ROS 2, docker is a great alternative. You can use an image from <a href="https://hub.docker.com/r/mgons/yasmin/">Dockerhub</a> or create your own images. First of all, to build the image you have to use the following command:</p>
<div class="fragment"><div class="line">## Assuming you are in the YASMIN project directory</div>
<div class="line">docker build -t yasmin .</div>
</div><!-- fragment --><p>To use a shortcut the docker build, you may use the following command:</p>
<div class="fragment"><div class="line">## Assuming you are in the YASMIN project directory</div>
<div class="line">make docker_build</div>
</div><!-- fragment --><p>After the image is created, run a docker container with the following command:</p>
<div class="fragment"><div class="line">docker run -it --net=host --ipc=host --privileged --env=&quot;DISPLAY&quot; --env=&quot;QT_X11_NO_MITSHM=1&quot; --volume=&quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&quot; --volume=&quot;${XAUTHORITY}:/root/.Xauthority&quot; --entrypoint /bin/bash yasmin</div>
</div><!-- fragment --><p>To use a shortcut the docker run, you may use following command:</p>
<div class="fragment"><div class="line">## Assuming you are in the YASMIN project directory</div>
<div class="line">make docker_run</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Demos</h1>
<p>There are some examples, for both Python and C++, that can be found in <a href="./yasmin_demos/">yasmin_demos</a>.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Python</h2>
<h3><a class="anchor" id="autotoc_md10"></a>
Vanilla Demo (FSM)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos yasmin_demo.py</div>
</div><!-- fragment --><p><img src="./docs/demo.gif" alt="" width="65%" class="inline"/> </p>
<details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> time</div>
<div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> State</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the FooState class, inheriting from the State class</span></div>
<div class="line"><span class="keyword">class </span>FooState(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Foo state in the state machine.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        counter (int): Counter to track the number of executions of this state.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the FooState instance, setting up the outcomes.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            outcome1: Indicates the state should continue to the Bar state.</span></div>
<div class="line"><span class="stringliteral">            outcome2: Indicates the state should finish execution and return.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__([<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>])</div>
<div class="line">        self.counter = 0</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Foo state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution, which can be &quot;outcome1&quot; or &quot;outcome2&quot;.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Executing state FOO&quot;</span>)</div>
<div class="line">        time.sleep(3)  <span class="comment"># Simulate work by sleeping</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> self.counter &lt; 3:</div>
<div class="line">            self.counter += 1</div>
<div class="line">            blackboard[<span class="stringliteral">&quot;foo_str&quot;</span>] = f<span class="stringliteral">&quot;Counter: {self.counter}&quot;</span></div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span></div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome2&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the BarState class, inheriting from the State class</span></div>
<div class="line"><span class="keyword">class </span>BarState(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Bar state in the state machine.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the BarState instance, setting up the outcome.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            outcome3: Indicates the state should transition back to the Foo state.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(outcomes=[<span class="stringliteral">&quot;outcome3&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Bar state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution, which will always be &quot;outcome3&quot;.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Executing state BAR&quot;</span>)</div>
<div class="line">        time.sleep(3)  <span class="comment"># Simulate work by sleeping</span></div>
<div class="line"> </div>
<div class="line">        yasmin.YASMIN_LOG_INFO(blackboard[<span class="stringliteral">&quot;foo_str&quot;</span>])</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome3&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Main function to initialize and run the state machine</span></div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    The main entry point of the application.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Initializes the ROS 2 environment, sets up the state machine,</span></div>
<div class="line"><span class="stringliteral">    and handles execution and termination.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: If the execution is interrupted by the user.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Initialize ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set ROS 2 loggers</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create a finite state machine (FSM)</span></div>
<div class="line">    sm = StateMachine(outcomes=[<span class="stringliteral">&quot;outcome4&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add states to the FSM</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;FOO&quot;</span>,</div>
<div class="line">        FooState(),</div>
<div class="line">        transitions={</div>
<div class="line">            <span class="stringliteral">&quot;outcome1&quot;</span>: <span class="stringliteral">&quot;BAR&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;outcome2&quot;</span>: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;BAR&quot;</span>,</div>
<div class="line">        BarState(),</div>
<div class="line">        transitions={</div>
<div class="line">            <span class="stringliteral">&quot;outcome3&quot;</span>: <span class="stringliteral">&quot;FOO&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM information for visualization</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;yasmin_demo&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute the FSM</span></div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm()</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            sm.cancel_state()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2 if it&#39;s running</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md11"></a>
Blackboard Remapping Demo</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos remap_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> State</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_namespace" href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a> <span class="keyword">import</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Foo(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Foo state in the state machine.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the FooState instance, setting up the outcomes.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            SUCCEED: Indicates the state should continue to the next state.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(outcomes=[SUCCEED])</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Foo state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution, which can be SUCCEED.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        data = blackboard[<span class="stringliteral">&quot;foo_data&quot;</span>]</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(f<span class="stringliteral">&quot;{data}&quot;</span>)</div>
<div class="line">        blackboard[<span class="stringliteral">&quot;foo_out_data&quot;</span>] = data</div>
<div class="line">        <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>BarState(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Bar state in the state machine.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the BarState instance, setting up the outcomes.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            SUCCEDED: Indicates the state should continue to the next state.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(outcomes=[SUCCEED])</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Bar state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution, which can be SUCCEED.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        data = blackboard[<span class="stringliteral">&quot;bar_data&quot;</span>]</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(f<span class="stringliteral">&quot;{data}&quot;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    The main entry point of the application.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Initializes the ROS 2 environment, sets up the state machine,</span></div>
<div class="line"><span class="stringliteral">    and handles execution and termination.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: If the execution is interrupted by the user.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    bb = Blackboard()</div>
<div class="line">    bb[<span class="stringliteral">&quot;msg1&quot;</span>] = <span class="stringliteral">&quot;test1&quot;</span></div>
<div class="line">    bb[<span class="stringliteral">&quot;msg2&quot;</span>] = <span class="stringliteral">&quot;test2&quot;</span></div>
<div class="line"> </div>
<div class="line">    sm = StateMachine(outcomes=[SUCCEED])</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;STATE1&quot;</span>,</div>
<div class="line">        Foo(),</div>
<div class="line">        transitions={SUCCEED: <span class="stringliteral">&quot;STATE2&quot;</span>},</div>
<div class="line">        remappings={<span class="stringliteral">&quot;foo_data&quot;</span>: <span class="stringliteral">&quot;msg1&quot;</span>},</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;STATE2&quot;</span>,</div>
<div class="line">        Foo(),</div>
<div class="line">        transitions={SUCCEED: <span class="stringliteral">&quot;STATE3&quot;</span>},</div>
<div class="line">        remappings={<span class="stringliteral">&quot;foo_data&quot;</span>: <span class="stringliteral">&quot;msg2&quot;</span>},</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;STATE3&quot;</span>,</div>
<div class="line">        BarState(),</div>
<div class="line">        transitions={SUCCEED: SUCCEED},</div>
<div class="line">        remappings={<span class="stringliteral">&quot;bar_data&quot;</span>: <span class="stringliteral">&quot;foo_out_data&quot;</span>},</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    sm.execute(bb)</div>
<div class="ttc" id="anamespaceyasmin__ros_1_1basic__outcomes_html"><div class="ttname"><a href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a></div><div class="ttdef"><b>Definition</b> basic_outcomes.py:1</div></div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md12"></a>
Concurrence Demo</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos concurrence_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> time</div>
<div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> State</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Concurrence</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the FooState class, inheriting from the State class</span></div>
<div class="line"><span class="keyword">class </span>FooState(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Foo state in the state machine.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        counter (int): Counter to track the number of executions of this state.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the FooState instance, setting up the outcomes.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            outcome1: Indicates the state should continue.</span></div>
<div class="line"><span class="stringliteral">            outcome2: Indicates the state should cotninue.</span></div>
<div class="line"><span class="stringliteral">            outcome3: Indicates the state should finish execution and return.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__([<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>, <span class="stringliteral">&quot;outcome3&quot;</span>])</div>
<div class="line">        self.counter = 0</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Foo state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Executing state FOO&quot;</span>)</div>
<div class="line">        time.sleep(2)  <span class="comment"># Simulate work by sleeping</span></div>
<div class="line"> </div>
<div class="line">        outcome = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">        blackboard[<span class="stringliteral">&quot;foo_str&quot;</span>] = f<span class="stringliteral">&quot;Counter: {self.counter}&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> self.counter &lt; 3:</div>
<div class="line">            outcome = <span class="stringliteral">&quot;outcome1&quot;</span></div>
<div class="line">        <span class="keywordflow">elif</span> self.counter &lt; 5:</div>
<div class="line">            outcome = <span class="stringliteral">&quot;outcome2&quot;</span></div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            outcome = <span class="stringliteral">&quot;outcome3&quot;</span></div>
<div class="line"> </div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Finishing state FOO&quot;</span>)</div>
<div class="line">        self.counter += 1</div>
<div class="line">        <span class="keywordflow">return</span> outcome</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the BarState class, inheriting from the State class</span></div>
<div class="line"><span class="keyword">class </span>BarState(State):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Represents the Bar state in the state machine.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the BarState instance, setting up the outcome.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Outcomes:</span></div>
<div class="line"><span class="stringliteral">            outcome3: This state will always return this outcome</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(outcomes=[<span class="stringliteral">&quot;outcome3&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute(self, blackboard: Blackboard) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Executes the logic for the Bar state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data structure for states.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the execution, which will always be &quot;outcome3&quot;.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            Exception: May raise exceptions related to state execution.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Executing state BAR&quot;</span>)</div>
<div class="line">        time.sleep(4)  <span class="comment"># Simulate work by sleeping</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> <span class="stringliteral">&quot;foo_str&quot;</span> <span class="keywordflow">in</span> blackboard:</div>
<div class="line">            yasmin.YASMIN_LOG_INFO(blackboard[<span class="stringliteral">&quot;foo_str&quot;</span>])</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Blackboard does not yet contain &#39;foo_str&#39;&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;Finishing state BAR&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome3&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Main function to initialize and run the state machine</span></div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    The main entry point of the application.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Initializes the ROS 2 environment, sets up the state machine,</span></div>
<div class="line"><span class="stringliteral">    and handles execution and termination.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: If the execution is interrupted by the user.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Initialize ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set ROS 2 loggers</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create a finite state machine (FSM)</span></div>
<div class="line">    sm = StateMachine(outcomes=[<span class="stringliteral">&quot;outcome4&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create states to run concurrently</span></div>
<div class="line">    foo_state: State = FooState()</div>
<div class="line">    bar_state: State = BarState()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add concurrence state</span></div>
<div class="line">    concurrence_state = Concurrence(</div>
<div class="line">        states=[foo_state, bar_state],</div>
<div class="line">        default_outcome=<span class="stringliteral">&quot;defaulted&quot;</span>,</div>
<div class="line">        outcome_map={</div>
<div class="line">            <span class="stringliteral">&quot;outcome1&quot;</span>: {foo_state: <span class="stringliteral">&quot;outcome1&quot;</span>, bar_state: <span class="stringliteral">&quot;outcome3&quot;</span>},</div>
<div class="line">            <span class="stringliteral">&quot;outcome2&quot;</span>: {foo_state: <span class="stringliteral">&quot;outcome2&quot;</span>, bar_state: <span class="stringliteral">&quot;outcome3&quot;</span>},</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add concurrent state to the FSM</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;CONCURRENCE&quot;</span>,</div>
<div class="line">        concurrence_state,</div>
<div class="line">        transitions={</div>
<div class="line">            <span class="stringliteral">&quot;outcome1&quot;</span>: <span class="stringliteral">&quot;CONCURRENCE&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;outcome2&quot;</span>: <span class="stringliteral">&quot;CONCURRENCE&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;defaulted&quot;</span>: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM information for visualization</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;yasmin_demo&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute the FSM</span></div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm()</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            sm.cancel_state()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2 if it&#39;s running</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md13"></a>
Service Demo (FSM + ROS 2 Service Client)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos add_two_ints_server</div>
</div><!-- fragment --><div class="fragment"><div class="line">ros2 run yasmin_demos service_client_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"><span class="keyword">from</span> example_interfaces.srv <span class="keyword">import</span> AddTwoInts</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> CbState</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> ServiceState</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_namespace" href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a> <span class="keyword">import</span> SUCCEED, ABORT</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>AddTwoIntsState(ServiceState):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    A state that calls the AddTwoInts service to add two integers.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This class is a state in a finite state machine that sends a request</span></div>
<div class="line"><span class="stringliteral">    to the AddTwoInts service, retrieves the response, and updates the</span></div>
<div class="line"><span class="stringliteral">    blackboard with the result.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        service_type (type): The service type being used (AddTwoInts).</span></div>
<div class="line"><span class="stringliteral">        service_name (str): The name of the service.</span></div>
<div class="line"><span class="stringliteral">        outcomes (list): The list of possible outcomes for this state.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the AddTwoIntsState.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Calls the parent constructor with the specific service type,</span></div>
<div class="line"><span class="stringliteral">        service name, request handler, outcomes, and response handler.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(</div>
<div class="line">            AddTwoInts,  <span class="comment"># srv type</span></div>
<div class="line">            <span class="stringliteral">&quot;/add_two_ints&quot;</span>,  <span class="comment"># service name</span></div>
<div class="line">            self.create_request_handler,  <span class="comment"># cb to create the request</span></div>
<div class="line">            [<span class="stringliteral">&quot;outcome1&quot;</span>],  <span class="comment"># outcomes. Includes (SUCCEED, ABORT)</span></div>
<div class="line">            self.response_handler,  <span class="comment"># cb to process the response</span></div>
<div class="line">        )</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>create_request_handler(self, blackboard: Blackboard) -&gt; AddTwoInts.Request:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Creates the service request from the blackboard data.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard containing the input values.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            AddTwoInts.Request: The request object populated with values from the blackboard.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        req = AddTwoInts.Request()</div>
<div class="line">        req.a = blackboard[<span class="stringliteral">&quot;a&quot;</span>]</div>
<div class="line">        req.b = blackboard[<span class="stringliteral">&quot;b&quot;</span>]</div>
<div class="line">        <span class="keywordflow">return</span> req</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>response_handler(</div>
<div class="line">        self, blackboard: Blackboard, response: AddTwoInts.Response</div>
<div class="line">    ) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Processes the response from the AddTwoInts service.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Updates the blackboard with the sum result from the response.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard to update with the sum.</span></div>
<div class="line"><span class="stringliteral">            response (AddTwoInts.Response): The response from the service call.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The outcome of the operation, which is &quot;outcome1&quot;.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        blackboard[<span class="stringliteral">&quot;sum&quot;</span>] = response.sum</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>set_ints(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Sets the integer values in the blackboard.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function initializes the blackboard with two integer values to be added.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard to update with integer values.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: The outcome of the operation, which is SUCCEED.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    blackboard[<span class="stringliteral">&quot;a&quot;</span>] = 10</div>
<div class="line">    blackboard[<span class="stringliteral">&quot;b&quot;</span>] = 5</div>
<div class="line">    <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>print_sum(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Logs the sum value from the blackboard.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function retrieves the sum from the blackboard and logs it.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard from which to retrieve the sum.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: The outcome of the operation, which is SUCCEED.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(f<span class="stringliteral">&quot;Sum: {blackboard[&#39;sum&#39;]}&quot;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    The main function to execute the finite state machine (FSM).</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function initializes the ROS 2 environment, sets up logging,</span></div>
<div class="line"><span class="stringliteral">    creates the FSM with defined states, and executes the FSM.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: If the user interrupts the program.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_service_client_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Init ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set ROS 2 logs</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create a FSM</span></div>
<div class="line">    sm = StateMachine(outcomes=[<span class="stringliteral">&quot;outcome4&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add states</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;SETTING_INTS&quot;</span>,</div>
<div class="line">        CbState([SUCCEED], set_ints),</div>
<div class="line">        transitions={SUCCEED: <span class="stringliteral">&quot;ADD_TWO_INTS&quot;</span>},</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;ADD_TWO_INTS&quot;</span>,</div>
<div class="line">        AddTwoIntsState(),</div>
<div class="line">        transitions={</div>
<div class="line">            <span class="stringliteral">&quot;outcome1&quot;</span>: <span class="stringliteral">&quot;PRINTING_SUM&quot;</span>,</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">            ABORT: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;PRINTING_SUM&quot;</span>,</div>
<div class="line">        CbState([SUCCEED], print_sum),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM info</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;YASMIN_SERVICE_CLIENT_DEMO&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute FSM</span></div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm()</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            sm.cancel_state()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md14"></a>
Action Demo (FSM + ROS 2 Action)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos fibonacci_action_server</div>
</div><!-- fragment --><div class="fragment"><div class="line">ros2 run yasmin_demos action_client_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"><span class="keyword">from</span> example_interfaces.action <span class="keyword">import</span> Fibonacci</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> CbState, Blackboard, StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> ActionState</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_namespace" href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a> <span class="keyword">import</span> SUCCEED, ABORT, CANCEL</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>FibonacciState(ActionState):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Class representing the state of the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Inherits from ActionState and implements methods to handle the</span></div>
<div class="line"><span class="stringliteral">    Fibonacci action in a finite state machine.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        None</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the FibonacciState.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Sets up the action type and the action name for the Fibonacci</span></div>
<div class="line"><span class="stringliteral">        action. Initializes goal, response handler, and feedback</span></div>
<div class="line"><span class="stringliteral">        processing callbacks.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(</div>
<div class="line">            Fibonacci,  <span class="comment"># action type</span></div>
<div class="line">            <span class="stringliteral">&quot;/fibonacci&quot;</span>,  <span class="comment"># action name</span></div>
<div class="line">            self.create_goal_handler,  <span class="comment"># callback to create the goal</span></div>
<div class="line">            <span class="keywordtype">None</span>,  <span class="comment"># outcomes. Includes (SUCCEED, ABORT, CANCEL)</span></div>
<div class="line">            self.response_handler,  <span class="comment"># callback to process the response</span></div>
<div class="line">            self.print_feedback,  <span class="comment"># callback to process the feedback</span></div>
<div class="line">        )</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>create_goal_handler(self, blackboard: Blackboard) -&gt; Fibonacci.Goal:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Creates the goal for the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        This method retrieves the input value from the blackboard and</span></div>
<div class="line"><span class="stringliteral">        populates the Fibonacci goal.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard containing the state</span></div>
<div class="line"><span class="stringliteral">            information.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            Fibonacci.Goal: The populated goal object for the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            KeyError: If the expected key is not present in the blackboard.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        goal = Fibonacci.Goal()</div>
<div class="line">        goal.order = blackboard[<span class="stringliteral">&quot;n&quot;</span>]  <span class="comment"># Retrieve the input value &#39;n&#39; from the blackboard</span></div>
<div class="line">        <span class="keywordflow">return</span> goal</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>response_handler(self, blackboard: Blackboard, response: Fibonacci.Result) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Handles the response from the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        This method processes the result of the Fibonacci action and</span></div>
<div class="line"><span class="stringliteral">        stores it in the blackboard.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard to store the result.</span></div>
<div class="line"><span class="stringliteral">            response (Fibonacci.Result): The result object from the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: Outcome of the operation, typically SUCCEED.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        blackboard[<span class="stringliteral">&quot;fibo_res&quot;</span>] = (</div>
<div class="line">            response.sequence</div>
<div class="line">        )  <span class="comment"># Store the result sequence in the blackboard</span></div>
<div class="line">        <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>print_feedback(</div>
<div class="line">        self, blackboard: Blackboard, feedback: Fibonacci.Feedback</div>
<div class="line">    ) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Prints feedback from the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        This method logs the partial sequence received during the action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard (not used in this method).</span></div>
<div class="line"><span class="stringliteral">            feedback (Fibonacci.Feedback): The feedback object from the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(f<span class="stringliteral">&quot;Received feedback: {list(feedback.sequence)}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>print_result(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Prints the result of the Fibonacci action.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function logs the final result stored in the blackboard.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Parameters:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard containing the result.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: Outcome of the operation, typically SUCCEED.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        None</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(f<span class="stringliteral">&quot;Result: {blackboard[&#39;fibo_res&#39;]}&quot;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Main function to execute the ROS 2 action client demo.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function initializes the ROS 2 client, sets up the finite state</span></div>
<div class="line"><span class="stringliteral">    machine, adds the states, and starts the action processing.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Parameters:</span></div>
<div class="line"><span class="stringliteral">        None</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        None</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: If the user interrupts the execution.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_action_client_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Initialize ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set up ROS 2 logs</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create a finite state machine (FSM)</span></div>
<div class="line">    sm = StateMachine(outcomes=[<span class="stringliteral">&quot;outcome4&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add states to the FSM</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;CALLING_FIBONACCI&quot;</span>,</div>
<div class="line">        FibonacciState(),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;PRINTING_RESULT&quot;</span>,</div>
<div class="line">            CANCEL: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">            ABORT: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;PRINTING_RESULT&quot;</span>,</div>
<div class="line">        CbState([SUCCEED], print_result),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM information</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;YASMIN_ACTION_CLIENT_DEMO&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create an initial blackboard with the input value</span></div>
<div class="line">    blackboard = Blackboard()</div>
<div class="line">    blackboard[<span class="stringliteral">&quot;n&quot;</span>] = 10  <span class="comment"># Set the Fibonacci order to 10</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute the FSM</span></div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm(blackboard)</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            sm.cancel_state()  <span class="comment"># Cancel the state if interrupted</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md15"></a>
Monitor Demo (FSM + ROS 2 Subscriber)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos monitor_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"><span class="keyword">from</span> rclpy.qos <span class="keyword">import</span> qos_profile_sensor_data</div>
<div class="line"><span class="keyword">from</span> nav_msgs.msg <span class="keyword">import</span> Odometry</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> MonitorState</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_namespace" href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a> <span class="keyword">import</span> TIMEOUT</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>PrintOdometryState(MonitorState):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    MonitorState subclass to handle Odometry messages.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This state monitors Odometry messages from the specified ROS topic,</span></div>
<div class="line"><span class="stringliteral">    logging them and transitioning based on the number of messages received.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        times (int): The number of messages to monitor before transitioning</span></div>
<div class="line"><span class="stringliteral">                     to the next outcome.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Parameters:</span></div>
<div class="line"><span class="stringliteral">        times (int): The initial count of how many Odometry messages to</span></div>
<div class="line"><span class="stringliteral">                     process before changing state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Methods:</span></div>
<div class="line"><span class="stringliteral">        monitor_handler(blackboard: Blackboard, msg: Odometry) -&gt; str:</span></div>
<div class="line"><span class="stringliteral">            Handles incoming Odometry messages, logging the message and</span></div>
<div class="line"><span class="stringliteral">            returning the appropriate outcome based on the remaining count.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self, times: int) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the PrintOdometryState.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            times (int): The number of Odometry messages to monitor before</span></div>
<div class="line"><span class="stringliteral">                         transitioning to the next outcome.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(</div>
<div class="line">            Odometry,  <span class="comment"># msg type</span></div>
<div class="line">            <span class="stringliteral">&quot;odom&quot;</span>,  <span class="comment"># topic name</span></div>
<div class="line">            [<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>],  <span class="comment"># outcomes</span></div>
<div class="line">            self.monitor_handler,  <span class="comment"># monitor handler callback</span></div>
<div class="line">            qos=qos_profile_sensor_data,  <span class="comment"># qos for the topic subscription</span></div>
<div class="line">            msg_queue=10,  <span class="comment"># queue for the monitor handler callback</span></div>
<div class="line">            timeout=10,  <span class="comment"># timeout to wait for messages in seconds</span></div>
<div class="line">        )</div>
<div class="line">        self.times = times</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>monitor_handler(self, blackboard: Blackboard, msg: Odometry) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Handles incoming Odometry messages.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        This method is called whenever a new Odometry message is received.</span></div>
<div class="line"><span class="stringliteral">        It logs the message, decrements the count of messages to process,</span></div>
<div class="line"><span class="stringliteral">        and determines the next state outcome.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Parameters:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The shared data storage for states.</span></div>
<div class="line"><span class="stringliteral">            msg (Odometry): The incoming Odometry message.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            str: The next state outcome, either &quot;outcome1&quot; to continue</span></div>
<div class="line"><span class="stringliteral">                 monitoring or &quot;outcome2&quot; to transition to the next state.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Exceptions:</span></div>
<div class="line"><span class="stringliteral">            None</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(msg)</div>
<div class="line"> </div>
<div class="line">        self.times -= 1</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> self.times &lt;= 0:</div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome2&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Main function to initialize and run the ROS 2 state machine.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    This function initializes ROS 2, sets up logging, creates a finite state</span></div>
<div class="line"><span class="stringliteral">    machine (FSM), adds states to the FSM, and executes the FSM. It handles</span></div>
<div class="line"><span class="stringliteral">    cleanup and shutdown of ROS 2 gracefully.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Exceptions:</span></div>
<div class="line"><span class="stringliteral">        KeyboardInterrupt: Caught to allow graceful cancellation of the</span></div>
<div class="line"><span class="stringliteral">                          state machine during execution.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_monitor_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Initialize ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set ROS 2 logs</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create a finite state machine (FSM)</span></div>
<div class="line">    sm = StateMachine(outcomes=[<span class="stringliteral">&quot;outcome4&quot;</span>])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add states to the FSM</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;PRINTING_ODOM&quot;</span>,</div>
<div class="line">        PrintOdometryState(5),</div>
<div class="line">        transitions={</div>
<div class="line">            <span class="stringliteral">&quot;outcome1&quot;</span>: <span class="stringliteral">&quot;PRINTING_ODOM&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;outcome2&quot;</span>: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">            TIMEOUT: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">            CANCEL: <span class="stringliteral">&quot;outcome4&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM information</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;YASMIN_MONITOR_DEMO&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute FSM</span></div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm()</div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            sm.cancel_state()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md16"></a>
Nav2 Demo (Hierarchical FSM + ROS 2 Action)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos nav_demo.py</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> random</div>
<div class="line"><span class="keyword">import</span> rclpy</div>
<div class="line"><span class="keyword">from</span> geometry_msgs.msg <span class="keyword">import</span> Pose</div>
<div class="line"><span class="keyword">from</span> nav2_msgs.action <span class="keyword">import</span> NavigateToPose</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> yasmin</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> CbState</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> Blackboard</div>
<div class="line"><span class="keyword">from</span> yasmin <span class="keyword">import</span> StateMachine</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> ActionState</div>
<div class="line"><span class="keyword">from</span> yasmin_ros <span class="keyword">import</span> set_ros_loggers</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_namespace" href="namespaceyasmin__ros_1_1basic__outcomes.html">yasmin_ros.basic_outcomes</a> <span class="keyword">import</span> SUCCEED, ABORT, CANCEL</div>
<div class="line"><span class="keyword">from</span> yasmin_viewer <span class="keyword">import</span> YasminViewerPub</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Constants for state outcomes</span></div>
<div class="line">HAS_NEXT = <span class="stringliteral">&quot;has_next&quot;</span>  </div>
<div class="line">END = <span class="stringliteral">&quot;end&quot;</span>  </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Nav2State(ActionState):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    ActionState for navigating to a specified pose using ROS 2 Navigation.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Attributes:</span></div>
<div class="line"><span class="stringliteral">        None</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Methods:</span></div>
<div class="line"><span class="stringliteral">        create_goal_handler(blackboard: Blackboard) -&gt; NavigateToPose.Goal:</span></div>
<div class="line"><span class="stringliteral">            Creates the navigation goal from the blackboard.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Initializes the Nav2State.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Calls the parent constructor to set up the action with:</span></div>
<div class="line"><span class="stringliteral">        - Action type: NavigateToPose</span></div>
<div class="line"><span class="stringliteral">        - Action name: /navigate_to_pose</span></div>
<div class="line"><span class="stringliteral">        - Callback for goal creation: create_goal_handler</span></div>
<div class="line"><span class="stringliteral">        - Outcomes: None, since it will use default outcomes (SUCCEED, ABORT, CANCEL)</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        super().__init__(</div>
<div class="line">            NavigateToPose,  <span class="comment"># action type</span></div>
<div class="line">            <span class="stringliteral">&quot;/navigate_to_pose&quot;</span>,  <span class="comment"># action name</span></div>
<div class="line">            self.create_goal_handler,  <span class="comment"># callback to create the goal</span></div>
<div class="line">            <span class="keywordtype">None</span>,  <span class="comment"># outcomes</span></div>
<div class="line">            <span class="keywordtype">None</span>,  <span class="comment"># callback to process the response</span></div>
<div class="line">        )</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>create_goal_handler(self, blackboard: Blackboard) -&gt; NavigateToPose.Goal:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        Creates a goal for navigation based on the current pose in the blackboard.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="stringliteral">            blackboard (Blackboard): The blackboard instance holding current state data.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="stringliteral">            NavigateToPose.Goal: The constructed goal for the navigation action.</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line">        goal = NavigateToPose.Goal()</div>
<div class="line">        goal.pose.pose = blackboard[<span class="stringliteral">&quot;pose&quot;</span>]</div>
<div class="line">        goal.pose.header.frame_id = <span class="stringliteral">&quot;map&quot;</span>  <span class="comment"># Set the reference frame to &#39;map&#39;</span></div>
<div class="line">        <span class="keywordflow">return</span> goal</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_waypoints(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Initializes waypoints in the blackboard for navigation.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard instance to store waypoints.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: Outcome indicating success (SUCCEED).</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    blackboard[<span class="stringliteral">&quot;waypoints&quot;</span>] = {</div>
<div class="line">        <span class="stringliteral">&quot;entrance&quot;</span>: [1.25, 6.30, -0.78, 0.67],</div>
<div class="line">        <span class="stringliteral">&quot;bathroom&quot;</span>: [4.89, 1.64, 0.0, 1.0],</div>
<div class="line">        <span class="stringliteral">&quot;livingroom&quot;</span>: [1.55, 4.03, -0.69, 0.72],</div>
<div class="line">        <span class="stringliteral">&quot;kitchen&quot;</span>: [3.79, 6.77, 0.99, 0.12],</div>
<div class="line">        <span class="stringliteral">&quot;bedroom&quot;</span>: [7.50, 4.89, 0.76, 0.65],</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>take_random_waypoint(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Selects a random set of waypoints from the available waypoints.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard instance to store random waypoints.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: Outcome indicating success (SUCCEED).</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    blackboard[<span class="stringliteral">&quot;random_waypoints&quot;</span>] = random.sample(</div>
<div class="line">        list(blackboard[<span class="stringliteral">&quot;waypoints&quot;</span>].keys()), blackboard[<span class="stringliteral">&quot;waypoints_num&quot;</span>]</div>
<div class="line">    )</div>
<div class="line">    <span class="keywordflow">return</span> SUCCEED</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>get_next_waypoint(blackboard: Blackboard) -&gt; str:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Retrieves the next waypoint from the list of random waypoints.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Updates the blackboard with the pose of the next waypoint.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        blackboard (Blackboard): The blackboard instance holding current state data.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        str: Outcome indicating whether there is a next waypoint (HAS_NEXT) or if</span></div>
<div class="line"><span class="stringliteral">             navigation is complete (END).</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> blackboard[<span class="stringliteral">&quot;random_waypoints&quot;</span>]:</div>
<div class="line">        <span class="keywordflow">return</span> END</div>
<div class="line"> </div>
<div class="line">    wp_name = blackboard[<span class="stringliteral">&quot;random_waypoints&quot;</span>].pop(0)  <span class="comment"># Get the next waypoint name</span></div>
<div class="line">    wp = blackboard[<span class="stringliteral">&quot;waypoints&quot;</span>][wp_name]  <span class="comment"># Get the waypoint coordinates</span></div>
<div class="line"> </div>
<div class="line">    pose = Pose()</div>
<div class="line">    pose.position.x = wp[0]</div>
<div class="line">    pose.position.y = wp[1]</div>
<div class="line">    pose.orientation.z = wp[2]</div>
<div class="line">    pose.orientation.w = wp[3]</div>
<div class="line"> </div>
<div class="line">    blackboard[<span class="stringliteral">&quot;pose&quot;</span>] = pose  <span class="comment"># Update blackboard with new pose</span></div>
<div class="line">    blackboard[<span class="stringliteral">&quot;text&quot;</span>] = f<span class="stringliteral">&quot;I have reached waypoint {wp_name}&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> HAS_NEXT</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># main function</span></div>
<div class="line"><span class="keyword">def </span>main() -&gt; None:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Initializes the ROS 2 node, sets up state machines for navigation, and executes the FSM.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    Handles cleanup and shutdown of the ROS 2 node upon completion.</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line">    yasmin.YASMIN_LOG_INFO(<span class="stringliteral">&quot;yasmin_nav2_demo&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Initialize ROS 2</span></div>
<div class="line">    rclpy.init()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Set ROS 2 loggers for debugging</span></div>
<div class="line">    set_ros_loggers()</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create state machines</span></div>
<div class="line">    sm = StateMachine(outcomes=[SUCCEED, ABORT, CANCEL])</div>
<div class="line">    nav_sm = StateMachine(outcomes=[SUCCEED, ABORT, CANCEL])</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Add states to the state machine</span></div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;CREATING_WAYPOINTS&quot;</span>,</div>
<div class="line">        CbState([SUCCEED], create_waypoints),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;TAKING_RANDOM_WAYPOINTS&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;TAKING_RANDOM_WAYPOINTS&quot;</span>,</div>
<div class="line">        CbState([SUCCEED], take_random_waypoint),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;NAVIGATING&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    nav_sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;GETTING_NEXT_WAYPOINT&quot;</span>,</div>
<div class="line">        CbState([END, HAS_NEXT], get_next_waypoint),</div>
<div class="line">        transitions={</div>
<div class="line">            END: SUCCEED,</div>
<div class="line">            HAS_NEXT: <span class="stringliteral">&quot;NAVIGATING&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line">    nav_sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;NAVIGATING&quot;</span>,</div>
<div class="line">        Nav2State(),</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: <span class="stringliteral">&quot;GETTING_NEXT_WAYPOINT&quot;</span>,</div>
<div class="line">            CANCEL: CANCEL,</div>
<div class="line">            ABORT: ABORT,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    sm.add_state(</div>
<div class="line">        <span class="stringliteral">&quot;NAVIGATING&quot;</span>,</div>
<div class="line">        nav_sm,</div>
<div class="line">        transitions={</div>
<div class="line">            SUCCEED: SUCCEED,</div>
<div class="line">            CANCEL: CANCEL,</div>
<div class="line">            ABORT: ABORT,</div>
<div class="line">        },</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Publish FSM information for visualization</span></div>
<div class="line">    YasminViewerPub(<span class="stringliteral">&quot;YASMIN_NAV_DEMO&quot;</span>, sm)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Execute the state machine</span></div>
<div class="line">    blackboard = Blackboard()</div>
<div class="line">    blackboard[<span class="stringliteral">&quot;waypoints_num&quot;</span>] = 2  <span class="comment"># Set the number of waypoints to navigate</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        outcome = sm(blackboard)  <span class="comment"># Run the state machine with the blackboard</span></div>
<div class="line">        yasmin.YASMIN_LOG_INFO(outcome)</div>
<div class="line">    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">        sm.cancel_state()  <span class="comment"># Handle manual interruption</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Shutdown ROS 2</span></div>
<div class="line">    <span class="keywordflow">if</span> rclpy.ok():</div>
<div class="line">        <span class="keywordflow">if</span> sm.is_running():</div>
<div class="line">            rclpy.shutdown()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --><p></p>
</details>
<h2><a class="anchor" id="autotoc_md17"></a>
Cpp</h2>
<h3><a class="anchor" id="autotoc_md18"></a>
Vanilla Demo</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos yasmin_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;rclcpp/rclcpp.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>FooState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> counter;</div>
<div class="line"></div>
<div class="line">  FooState() : <a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>::<a class="code hl_class" href="classyasmin_1_1state_1_1State.html">State</a>({<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>}), counter(0){};</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Executing state FOO&quot;</span>);</div>
<div class="line">    std::this_thread::sleep_for(std::chrono::seconds(3));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (this-&gt;counter &lt; 3) {</div>
<div class="line">      this-&gt;counter += 1;</div>
<div class="line">      blackboard-&gt;set&lt;std::string&gt;(<span class="stringliteral">&quot;foo_str&quot;</span>,</div>
<div class="line">                                   <span class="stringliteral">&quot;Counter: &quot;</span> + std::to_string(this-&gt;counter));</div>
<div class="line">      <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome2&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>BarState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  BarState() : yasmin::State({<span class="stringliteral">&quot;outcome3&quot;</span>}) {}</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Executing state BAR&quot;</span>);</div>
<div class="line">    std::this_thread::sleep_for(std::chrono::seconds(3));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(blackboard-&gt;get&lt;std::string&gt;(<span class="stringliteral">&quot;foo_str&quot;</span>).c_str());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome3&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set ROS 2 logs</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a state machine</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<span class="stringliteral">&quot;outcome4&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel state machine on ROS 2 shutdown</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add states to the state machine</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;FOO&quot;</span>, std::make_shared&lt;FooState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;BAR&quot;</span>},</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome2&quot;</span>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;BAR&quot;</span>, std::make_shared&lt;BarState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome3&quot;</span>, <span class="stringliteral">&quot;FOO&quot;</span>},</div>
<div class="line">                });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publish state machine updates</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;yasmin_demo&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())();</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassyasmin_1_1state_1_1State_html"><div class="ttname"><a href="classyasmin_1_1state_1_1State.html">yasmin.state.State</a></div><div class="ttdef"><b>Definition</b> state.py:23</div></div>
<div class="ttc" id="aclassyasmin_1_1state_1_1State_html_a531c80a2c77722089d92e7a9c73f69d8"><div class="ttname"><a href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">yasmin.state.State.execute</a></div><div class="ttdeci">str execute(self, Blackboard blackboard)</div><div class="ttdef"><b>Definition</b> state.py:90</div></div>
<div class="ttc" id="aclassyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub_html"><div class="ttname"><a href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer.yasmin_viewer_pub.YasminViewerPub</a></div><div class="ttdef"><b>Definition</b> yasmin_viewer_pub.py:28</div></div>
<div class="ttc" id="anamespaceyasmin_1_1logs_html_a4cd463e66fad9e3b3c2685f4fb2d2347"><div class="ttname"><a href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">yasmin.logs.YASMIN_LOG_INFO</a></div><div class="ttdeci">None YASMIN_LOG_INFO(str text)</div><div class="ttdef"><b>Definition</b> logs.py:197</div></div>
<div class="ttc" id="anamespaceyasmin_1_1logs_html_afe81e5c7410c7f42a1b92726ba8e667e"><div class="ttname"><a href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">yasmin.logs.YASMIN_LOG_WARN</a></div><div class="ttdeci">None YASMIN_LOG_WARN(str text)</div><div class="ttdef"><b>Definition</b> logs.py:181</div></div>
<div class="ttc" id="anamespaceyasmin__demos_1_1remap__demo_html_a1e9e4e1fb01a9338a78619dc6a38bd3b"><div class="ttname"><a href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">yasmin_demos.remap_demo.sm</a></div><div class="ttdeci">sm</div><div class="ttdef"><b>Definition</b> remap_demo.py:106</div></div>
<div class="ttc" id="anamespaceyasmin__viewer_1_1yasmin__viewer__node_html_aa5aebdb9275eede1a284bc242182d026"><div class="ttname"><a href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">yasmin_viewer.yasmin_viewer_node.main</a></div><div class="ttdeci">None main()</div><div class="ttdef"><b>Definition</b> yasmin_viewer_node.py:198</div></div>
<div class="ttc" id="anamespaceyasmin_html"><div class="ttname"><a href="namespaceyasmin.html">yasmin</a></div><div class="ttdef"><b>Definition</b> __init__.py:1</div></div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md19"></a>
Blackboard Remapping Demo</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos remap_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;rclcpp/rclcpp.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/basic_outcomes.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>FooState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  FooState() : <a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>::<a class="code hl_class" href="classyasmin_1_1state_1_1State.html">State</a>({<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>}){};</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    std::string data = blackboard-&gt;get&lt;std::string&gt;(<span class="stringliteral">&quot;foo_data&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;%s&quot;</span>, data.c_str());</div>
<div class="line">    blackboard-&gt;set&lt;std::string&gt;(<span class="stringliteral">&quot;foo_out_data&quot;</span>, data);</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>BarState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  BarState() : yasmin::State({<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>}) {}</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    std::string datga = blackboard-&gt;get&lt;std::string&gt;(<span class="stringliteral">&quot;bar_data&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;%s&quot;</span>, datga.c_str());</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set ROS 2 logs</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create blackboard</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a> = std::make_shared&lt;yasmin::blackboard::Blackboard&gt;();</div>
<div class="line">  <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;set&lt;std::string&gt;(<span class="stringliteral">&quot;msg1&quot;</span>, <span class="stringliteral">&quot;test1&quot;</span>);</div>
<div class="line">  <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;set&lt;std::string&gt;(<span class="stringliteral">&quot;msg2&quot;</span>, <span class="stringliteral">&quot;test2&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a state machine</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel state machine on ROS 2 shutdown</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add states to the state machine</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;STATE1&quot;</span>, std::make_shared&lt;FooState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;STATE2&quot;</span>},</div>
<div class="line">                },</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;foo_data&quot;</span>, <span class="stringliteral">&quot;msg1&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;STATE2&quot;</span>, std::make_shared&lt;FooState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;STATE3&quot;</span>},</div>
<div class="line">                },</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;foo_data&quot;</span>, <span class="stringliteral">&quot;msg2&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;STATE3&quot;</span>, std::make_shared&lt;BarState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>,</div>
<div class="line">                     <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>},</div>
<div class="line">                },</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;bar_data&quot;</span>, <span class="stringliteral">&quot;foo_out_data&quot;</span>},</div>
<div class="line">                });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publish state machine updates</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;yasmin_demo&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())(<a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceyasmin_1_1blackboard_html"><div class="ttname"><a href="namespaceyasmin_1_1blackboard.html">yasmin.blackboard</a></div><div class="ttdef"><b>Definition</b> blackboard.py:1</div></div>
<div class="ttc" id="anamespaceyasmin__ros_1_1basic__outcomes_html_af61301abb8214fa901179eea171ee318"><div class="ttname"><a href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros.basic_outcomes.SUCCEED</a></div><div class="ttdeci">str SUCCEED</div><div class="ttdoc">Indicates that an operation has completed successfully.</div><div class="ttdef"><b>Definition</b> basic_outcomes.py:23</div></div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md20"></a>
Concurrence Demo</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos concurrence_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;rclcpp/rclcpp.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/concurrence.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>FooState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> counter;</div>
<div class="line"></div>
<div class="line">  FooState()</div>
<div class="line">      : <a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>::<a class="code hl_class" href="classyasmin_1_1state_1_1State.html">State</a>({<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>, <span class="stringliteral">&quot;outcome3&quot;</span>}), counter(0){};</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Executing state FOO&quot;</span>);</div>
<div class="line">    std::this_thread::sleep_for(std::chrono::seconds(2));</div>
<div class="line"> </div>
<div class="line">    std::string outcome;</div>
<div class="line"> </div>
<div class="line">    blackboard-&gt;set&lt;std::string&gt;(<span class="stringliteral">&quot;foo_str&quot;</span>,</div>
<div class="line">                                 <span class="stringliteral">&quot;Counter: &quot;</span> + std::to_string(this-&gt;counter));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (this-&gt;counter &lt; 3) {</div>
<div class="line">      outcome = <span class="stringliteral">&quot;outcome1&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;counter &lt; 5) {</div>
<div class="line">      outcome = <span class="stringliteral">&quot;outcome2&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      outcome = <span class="stringliteral">&quot;outcome3&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Finishing state FOO&quot;</span>);</div>
<div class="line">    this-&gt;counter += 1;</div>
<div class="line">    <span class="keywordflow">return</span> outcome;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>BarState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin_1_1state_1_1State.html">yasmin::State</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  BarState() : yasmin::State({<span class="stringliteral">&quot;outcome3&quot;</span>}) {}</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  <a class="code hl_function" href="classyasmin_1_1state_1_1State.html#a531c80a2c77722089d92e7a9c73f69d8">execute</a>(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard)<span class="keyword"> override </span>{</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Executing state BAR&quot;</span>);</div>
<div class="line">    std::this_thread::sleep_for(std::chrono::seconds(4));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (blackboard-&gt;contains(<span class="stringliteral">&quot;foo_str&quot;</span>)) {</div>
<div class="line">      <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(blackboard-&gt;get&lt;std::string&gt;(<span class="stringliteral">&quot;foo_str&quot;</span>).c_str());</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;blackboard does not yet contains &#39;foo_str&#39;&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;Finishing state BAR&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome3&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set ROS 2 logs</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a state machine</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<span class="stringliteral">&quot;outcome4&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel state machine on ROS 2 shutdown</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create states to run concurrently</span></div>
<div class="line">  <span class="keyword">auto</span> foo_state = std::make_shared&lt;FooState&gt;();</div>
<div class="line">  <span class="keyword">auto</span> bar_state = std::make_shared&lt;BarState&gt;();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create concurrent state</span></div>
<div class="line">  <span class="keyword">auto</span> concurrent_state = std::make_shared&lt;Concurrence&gt;(</div>
<div class="line">      std::set&lt;std::shared_ptr&lt;State&gt;&gt;{foo_state, bar_state}, <span class="stringliteral">&quot;defaulted&quot;</span>,</div>
<div class="line">      Concurrence::OutcomeMap{</div>
<div class="line">          {<span class="stringliteral">&quot;outcome1&quot;</span>, Concurrence::StateMap{{foo_state, <span class="stringliteral">&quot;outcome1&quot;</span>},</div>
<div class="line">                                             {bar_state, <span class="stringliteral">&quot;outcome3&quot;</span>}}},</div>
<div class="line">          {<span class="stringliteral">&quot;outcome2&quot;</span>, Concurrence::StateMap{{foo_state, <span class="stringliteral">&quot;outcome2&quot;</span>},</div>
<div class="line">                                             {bar_state, <span class="stringliteral">&quot;outcome3&quot;</span>}}}});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add concurrent state to the state machine</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;CONCURRENCE&quot;</span>, concurrent_state,</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;CONCURRENCE&quot;</span>},</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome2&quot;</span>, <span class="stringliteral">&quot;CONCURRENCE&quot;</span>},</div>
<div class="line">                    {<span class="stringliteral">&quot;defaulted&quot;</span>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publish state machine updates</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;yasmin_demo&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())();</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md21"></a>
Service Demo (FSM + ROS 2 Service Client)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos add_two_ints_server</div>
</div><!-- fragment --><div class="fragment"><div class="line">ros2 run yasmin_demos service_client_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;example_interfaces/srv/add_two_ints.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;rclcpp/rclcpp.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/cb_state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/basic_outcomes.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/service_state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span>std::placeholders::_1;</div>
<div class="line"><span class="keyword">using </span>std::placeholders::_2;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line">std::string</div>
<div class="line">set_ints(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>) {</div>
<div class="line">  <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;set&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;a&quot;</span>, 10);</div>
<div class="line">  <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;set&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;b&quot;</span>, 5);</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::string</div>
<div class="line">print_sum(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Sum: %d\n&quot;</span>, <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;sum&quot;</span>));</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>AddTwoIntsState</div>
<div class="line">    : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin__ros_1_1service__state_1_1ServiceState.html">yasmin_ros::ServiceState</a>&lt;example_interfaces::srv::AddTwoInts&gt; {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  AddTwoIntsState()</div>
<div class="line">      : yasmin_ros::ServiceState&lt;example_interfaces::srv::AddTwoInts&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;/add_two_ints&quot;</span>,</div>
<div class="line">            std::bind(&amp;AddTwoIntsState::create_request_handler, this, _1),</div>
<div class="line">            {<span class="stringliteral">&quot;outcome1&quot;</span>},</div>
<div class="line">            std::bind(&amp;AddTwoIntsState::response_handler, <span class="keyword">this</span>, _1, _2)){};</div>
<div class="line"></div>
<div class="line">  example_interfaces::srv::AddTwoInts::Request::SharedPtr</div>
<div class="line">  create_request_handler(</div>
<div class="line">      std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> request =</div>
<div class="line">        std::make_shared&lt;example_interfaces::srv::AddTwoInts::Request&gt;();</div>
<div class="line">    request-&gt;a = blackboard-&gt;get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">    request-&gt;b = blackboard-&gt;get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;b&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> request;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  std::string response_handler(</div>
<div class="line">      std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard,</div>
<div class="line">      example_interfaces::srv::AddTwoInts::Response::SharedPtr response) {</div>
<div class="line"> </div>
<div class="line">    blackboard-&gt;set&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;sum&quot;</span>, response-&gt;sum);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span>;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_service_client_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set up ROS 2 logging.</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a state machine with a specified outcome.</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<span class="stringliteral">&quot;outcome4&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel the state machine on ROS 2 shutdown.</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add states to the state machine.</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;SETTING_INTS&quot;</span>,</div>
<div class="line">                std::make_shared&lt;yasmin::CbState&gt;(</div>
<div class="line">                    std::initializer_list&lt;std::string&gt;{</div>
<div class="line">                        <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>},</div>
<div class="line">                    <a class="code hl_function" href="namespaceyasmin__demos_1_1service__client__demo.html#a522dc92d336019a6dd464206b9744011">set_ints</a>),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;ADD_TWO_INTS&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;ADD_TWO_INTS&quot;</span>, std::make_shared&lt;AddTwoIntsState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;PRINTING_SUM&quot;</span>},</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#aab7808b49a690522da9b7d1922f718b0">yasmin_ros::basic_outcomes::ABORT</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;PRINTING_SUM&quot;</span>,</div>
<div class="line">                std::make_shared&lt;yasmin::CbState&gt;(</div>
<div class="line">                    std::initializer_list&lt;std::string&gt;{</div>
<div class="line">                        <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>},</div>
<div class="line">                    <a class="code hl_function" href="namespaceyasmin__demos_1_1service__client__demo.html#aedfdd50b714611f271d7512ddb2549e1">print_sum</a>),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publish state machine visualization.</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;YASMIN_ACTION_CLIENT_DEMO&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine.</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())();</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassyasmin__ros_1_1service__state_1_1ServiceState_html"><div class="ttname"><a href="classyasmin__ros_1_1service__state_1_1ServiceState.html">yasmin_ros.service_state.ServiceState</a></div><div class="ttdef"><b>Definition</b> service_state.py:29</div></div>
<div class="ttc" id="anamespaceyasmin__demos_1_1service__client__demo_html_a522dc92d336019a6dd464206b9744011"><div class="ttname"><a href="namespaceyasmin__demos_1_1service__client__demo.html#a522dc92d336019a6dd464206b9744011">yasmin_demos.service_client_demo.set_ints</a></div><div class="ttdeci">str set_ints(Blackboard blackboard)</div><div class="ttdef"><b>Definition</b> service_client_demo.py:94</div></div>
<div class="ttc" id="anamespaceyasmin__demos_1_1service__client__demo_html_aedfdd50b714611f271d7512ddb2549e1"><div class="ttname"><a href="namespaceyasmin__demos_1_1service__client__demo.html#aedfdd50b714611f271d7512ddb2549e1">yasmin_demos.service_client_demo.print_sum</a></div><div class="ttdeci">str print_sum(Blackboard blackboard)</div><div class="ttdef"><b>Definition</b> service_client_demo.py:111</div></div>
<div class="ttc" id="anamespaceyasmin__ros_1_1basic__outcomes_html_aab7808b49a690522da9b7d1922f718b0"><div class="ttname"><a href="namespaceyasmin__ros_1_1basic__outcomes.html#aab7808b49a690522da9b7d1922f718b0">yasmin_ros.basic_outcomes.ABORT</a></div><div class="ttdeci">str ABORT</div><div class="ttdoc">Indicates that an operation was aborted before completion.</div><div class="ttdef"><b>Definition</b> basic_outcomes.py:24</div></div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md22"></a>
Action Demo (FSM + ROS 2 Action)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos fibonacci_action_server</div>
</div><!-- fragment --><div class="fragment"><div class="line">ros2 run yasmin_demos action_client_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;example_interfaces/action/fibonacci.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/cb_state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/action_state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/basic_outcomes.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/yasmin_node.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span>std::placeholders::_1;</div>
<div class="line"><span class="keyword">using </span>std::placeholders::_2;</div>
<div class="line"><span class="keyword">using </span>Fibonacci = example_interfaces::action::Fibonacci;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line">std::string</div>
<div class="line">print_result(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>) {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> fibo_res = <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;get&lt;std::vector&lt;int&gt;&gt;(<span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Result received:&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ele : fibo_res) {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot; %d,&quot;</span>, ele);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>FibonacciState : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin__ros_1_1action__state_1_1ActionState.html">yasmin_ros::ActionState</a>&lt;Fibonacci&gt; {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  FibonacciState()</div>
<div class="line">      : yasmin_ros::ActionState&lt;Fibonacci&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;/fibonacci&quot;</span>,</div>
<div class="line">            std::bind(&amp;FibonacciState::create_goal_handler, this, _1),</div>
<div class="line">            std::bind(&amp;FibonacciState::response_handler, this, _1, _2),</div>
<div class="line">            std::bind(&amp;FibonacciState::print_feedback, this, _1, _2)){};</div>
<div class="line"></div>
<div class="line">  Fibonacci::Goal create_goal_handler(</div>
<div class="line">      std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> goal = Fibonacci::Goal();</div>
<div class="line">    goal.order = blackboard-&gt;get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> goal;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  response_handler(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard,</div>
<div class="line">                   Fibonacci::Result::SharedPtr response) {</div>
<div class="line"> </div>
<div class="line">    blackboard-&gt;set&lt;std::vector&lt;int&gt;&gt;(<span class="stringliteral">&quot;sum&quot;</span>, response-&gt;sequence);</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">void</span></div>
<div class="line">  print_feedback(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard,</div>
<div class="line">                 std::shared_ptr&lt;const Fibonacci::Feedback&gt; feedback) {</div>
<div class="line">    (void)blackboard;</div>
<div class="line"> </div>
<div class="line">    std::stringstream ss;</div>
<div class="line">    ss &lt;&lt; <span class="stringliteral">&quot;Next number in sequence received: &quot;</span>;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> number : feedback-&gt;sequence) {</div>
<div class="line">      ss &lt;&lt; number &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, ss.str().c_str());</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_action_client_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set ROS 2 logging</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create the state machine</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<span class="stringliteral">&quot;outcome4&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel state machine on ROS 2 shutdown</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add states to the state machine</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;CALLING_FIBONACCI&quot;</span>, std::make_shared&lt;FibonacciState&gt;(),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;PRINTING_RESULT&quot;</span>},</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#aef344807a5c01c65ef6e81cfa1d395c6">yasmin_ros::basic_outcomes::CANCEL</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#aab7808b49a690522da9b7d1922f718b0">yasmin_ros::basic_outcomes::ABORT</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(<span class="stringliteral">&quot;PRINTING_RESULT&quot;</span>,</div>
<div class="line">                std::make_shared&lt;yasmin::CbState&gt;(</div>
<div class="line">                    std::initializer_list&lt;std::string&gt;{</div>
<div class="line">                        <a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>},</div>
<div class="line">                    <a class="code hl_function" href="namespaceyasmin__demos_1_1action__client__demo.html#aa1b52df73df29943208e8d1a502b9d6e">print_result</a>),</div>
<div class="line">                {</div>
<div class="line">                    {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#af61301abb8214fa901179eea171ee318">yasmin_ros::basic_outcomes::SUCCEED</a>, <span class="stringliteral">&quot;outcome4&quot;</span>},</div>
<div class="line">                });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publisher for visualizing the state machine</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;YASMIN_ACTION_CLIENT_DEMO&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create an initial blackboard and set the Fibonacci order</span></div>
<div class="line">  std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a> =</div>
<div class="line">      std::make_shared&lt;yasmin::blackboard::Blackboard&gt;();</div>
<div class="line">  <a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>-&gt;set&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;n&quot;</span>, 10);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())(<a class="code hl_namespace" href="namespaceyasmin_1_1blackboard.html">blackboard</a>);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassyasmin__ros_1_1action__state_1_1ActionState_html"><div class="ttname"><a href="classyasmin__ros_1_1action__state_1_1ActionState.html">yasmin_ros.action_state.ActionState</a></div><div class="ttdef"><b>Definition</b> action_state.py:33</div></div>
<div class="ttc" id="anamespaceyasmin__demos_1_1action__client__demo_html_aa1b52df73df29943208e8d1a502b9d6e"><div class="ttname"><a href="namespaceyasmin__demos_1_1action__client__demo.html#aa1b52df73df29943208e8d1a502b9d6e">yasmin_demos.action_client_demo.print_result</a></div><div class="ttdeci">str print_result(Blackboard blackboard)</div><div class="ttdef"><b>Definition</b> action_client_demo.py:127</div></div>
<div class="ttc" id="anamespaceyasmin__ros_1_1basic__outcomes_html_aef344807a5c01c65ef6e81cfa1d395c6"><div class="ttname"><a href="namespaceyasmin__ros_1_1basic__outcomes.html#aef344807a5c01c65ef6e81cfa1d395c6">yasmin_ros.basic_outcomes.CANCEL</a></div><div class="ttdeci">str CANCEL</div><div class="ttdoc">Indicates that an operation was canceled by the user or system.</div><div class="ttdef"><b>Definition</b> basic_outcomes.py:26</div></div>
</div><!-- fragment --><p></p>
</details>
<h3><a class="anchor" id="autotoc_md23"></a>
Monitor Demo (FSM + ROS 2 Subscriber)</h3>
<div class="fragment"><div class="line">ros2 run yasmin_demos monitor_demo</div>
</div><!-- fragment --><details >
<summary >
Click to expand</summary>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;nav_msgs/msg/odometry.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;rclcpp/rclcpp.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin/state_machine.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/basic_outcomes.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/monitor_state.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_ros/ros_logs.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;yasmin_viewer/yasmin_viewer_pub.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span>std::placeholders::_1;</div>
<div class="line"><span class="keyword">using </span>std::placeholders::_2;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyasmin.html">yasmin</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>PrintOdometryState</div>
<div class="line">    : <span class="keyword">public</span> <a class="code hl_class" href="classyasmin__ros_1_1monitor__state_1_1MonitorState.html">yasmin_ros::MonitorState</a>&lt;nav_msgs::msg::Odometry&gt; {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> times;</div>
<div class="line"></div>
<div class="line">  PrintOdometryState(<span class="keywordtype">int</span> times)</div>
<div class="line">      : <a class="code hl_namespace" href="namespaceyasmin__ros.html">yasmin_ros</a>::MonitorState&lt;nav_msgs::msg::Odometry&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;odom&quot;</span>,                   <span class="comment">// topic name</span></div>
<div class="line">            {<span class="stringliteral">&quot;outcome1&quot;</span>, <span class="stringliteral">&quot;outcome2&quot;</span>}, <span class="comment">// possible outcomes</span></div>
<div class="line">            std::bind(&amp;PrintOdometryState::monitor_handler, <span class="keyword">this</span>, _1,</div>
<div class="line">                      _2), <span class="comment">// monitor handler callback</span></div>
<div class="line">            10,            <span class="comment">// QoS for the topic subscription</span></div>
<div class="line">            10,            <span class="comment">// queue size for the callback</span></div>
<div class="line">            10             <span class="comment">// timeout for receiving messages</span></div>
<div class="line">        ) {</div>
<div class="line">    this-&gt;times = times;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  std::string</div>
<div class="line">  monitor_handler(std::shared_ptr&lt;yasmin::blackboard::Blackboard&gt; blackboard,</div>
<div class="line">                  std::shared_ptr&lt;nav_msgs::msg::Odometry&gt; msg) {</div>
<div class="line"> </div>
<div class="line">    (void)blackboard; <span class="comment">// blackboard is not used in this implementation</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;x: %f&quot;</span>, msg-&gt;pose.pose.position.x);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;y: %f&quot;</span>, msg-&gt;pose.pose.position.y);</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;z: %f&quot;</span>, msg-&gt;pose.pose.position.z);</div>
<div class="line"> </div>
<div class="line">    this-&gt;times--;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Transition based on remaining times</span></div>
<div class="line">    <span class="keywordflow">if</span> (this-&gt;times &lt;= 0) {</div>
<div class="line">      <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome2&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;outcome1&quot;</span>;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="namespaceyasmin__viewer_1_1yasmin__viewer__node.html#aa5aebdb9275eede1a284bc242182d026">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(<span class="stringliteral">&quot;yasmin_monitor_demo&quot;</span>);</div>
<div class="line">  rclcpp::init(argc, argv);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set up ROS 2 loggers</span></div>
<div class="line">  yasmin_ros::set_ros_loggers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a state machine with a final outcome</span></div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a> = std::make_shared&lt;yasmin::StateMachine&gt;(</div>
<div class="line">      std::initializer_list&lt;std::string&gt;{<span class="stringliteral">&quot;outcome4&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Cancel state machine on ROS 2 shutdown</span></div>
<div class="line">  rclcpp::on_shutdown([sm]() {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;is_running()) {</div>
<div class="line">      <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;cancel_state();</div>
<div class="line">    }</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add states to the state machine</span></div>
<div class="line">  <a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>-&gt;add_state(</div>
<div class="line">      <span class="stringliteral">&quot;PRINTING_ODOM&quot;</span>, std::make_shared&lt;PrintOdometryState&gt;(5),</div>
<div class="line">      {</div>
<div class="line">          {<span class="stringliteral">&quot;outcome1&quot;</span>,</div>
<div class="line">           <span class="stringliteral">&quot;PRINTING_ODOM&quot;</span>},        <span class="comment">// Transition back to itself on outcome1</span></div>
<div class="line">          {<span class="stringliteral">&quot;outcome2&quot;</span>, <span class="stringliteral">&quot;outcome4&quot;</span>}, <span class="comment">// Transition to outcome4 on outcome2</span></div>
<div class="line">          {<a class="code hl_variable" href="namespaceyasmin__ros_1_1basic__outcomes.html#ac68b50ac3123121d3caf32174e064abb">yasmin_ros::basic_outcomes::TIMEOUT</a>,</div>
<div class="line">           <span class="stringliteral">&quot;outcome4&quot;</span>}, <span class="comment">// Timeout transition</span></div>
<div class="line">      });</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publisher for visualizing the state machine&#39;s status</span></div>
<div class="line">  <a class="code hl_class" href="classyasmin__viewer_1_1yasmin__viewer__pub_1_1YasminViewerPub.html">yasmin_viewer::YasminViewerPub</a> yasmin_pub(<span class="stringliteral">&quot;YASMIN_MONITOR_DEMO&quot;</span>, sm);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Execute the state machine</span></div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    std::string outcome = (*<a class="code hl_variable" href="namespaceyasmin__demos_1_1remap__demo.html#a1e9e4e1fb01a9338a78619dc6a38bd3b">sm</a>.get())();</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#a4cd463e66fad9e3b3c2685f4fb2d2347">YASMIN_LOG_INFO</a>(outcome.c_str());</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line">    <a class="code hl_function" href="namespaceyasmin_1_1logs.html#afe81e5c7410c7f42a1b92726ba8e667e">YASMIN_LOG_WARN</a>(e.what());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rclcpp::shutdown();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassyasmin__ros_1_1monitor__state_1_1MonitorState_html"><div class="ttname"><a href="classyasmin__ros_1_1monitor__state_1_1MonitorState.html">yasmin_ros.monitor_state.MonitorState</a></div><div class="ttdef"><b>Definition</b> monitor_state.py:31</div></div>
<div class="ttc" id="anamespaceyasmin__ros_1_1basic__outcomes_html_ac68b50ac3123121d3caf32174e064abb"><div class="ttname"><a href="namespaceyasmin__ros_1_1basic__outcomes.html#ac68b50ac3123121d3caf32174e064abb">yasmin_ros.basic_outcomes.TIMEOUT</a></div><div class="ttdeci">str TIMEOUT</div><div class="ttdoc">Indicates that an operation has timed out and did not complete in a timely manner.</div><div class="ttdef"><b>Definition</b> basic_outcomes.py:27</div></div>
<div class="ttc" id="anamespaceyasmin__ros_html"><div class="ttname"><a href="namespaceyasmin__ros.html">yasmin_ros</a></div><div class="ttdef"><b>Definition</b> __init__.py:1</div></div>
</div><!-- fragment --><p></p>
</details>
<p><a class="anchor" id="#YASMIN-Viewer"></a></p>
<h1><a class="anchor" id="autotoc_md24"></a>
YASMIN Viewer</h1>
<p>The <b>YASMIN Viewer</b> provides a convenient way to monitor <b>YASMIN</b>'s Finite State Machines (FSM). It is built using <b>Flask</b> and <b>ReactJS</b> and includes a filter to focus on a single FSM at a time.</p>
<p><img src="./docs/viewer.gif" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md25"></a>
Getting Started</h2>
<div class="fragment"><div class="line">ros2 run yasmin_viewer yasmin_viewer_node</div>
</div><!-- fragment --><p>Once started, open <a href="http://localhost:5000/">http://localhost:5000/</a> in your browser to view your state machines.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Custom host and port</h2>
<p>You can specify a custom host and port by using the following command:</p>
<div class="fragment"><div class="line">ros2 run yasmin_viewer yasmin_viewer_node --ros-args -p host:=127.0.0.1 -p port:=5032</div>
</div><!-- fragment --><p>After running the command, access your state machines at <a href="http://127.0.0.1:5032/">http://127.0.0.1:5032/</a>.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
Citations</h1>
<div class="fragment"><div class="line">@InProceedings{10.1007/978-3-031-21062-4_43,</div>
<div class="line">author=&quot;Gonz{\&#39;a}lez-Santamarta, Miguel {\&#39;A}.</div>
<div class="line">and Rodr{\&#39;i}guez-Lera, Francisco J.</div>
<div class="line">and Matell{\&#39;a}n-Olivera, Vicente</div>
<div class="line">and Fern{\&#39;a}ndez-Llamas, Camino&quot;,</div>
<div class="line">editor=&quot;Tardioli, Danilo</div>
<div class="line">and Matell{\&#39;a}n, Vicente</div>
<div class="line">and Heredia, Guillermo</div>
<div class="line">and Silva, Manuel F.</div>
<div class="line">and Marques, Lino&quot;,</div>
<div class="line">title=&quot;YASMIN: Yet Another State MachINe&quot;,</div>
<div class="line">booktitle=&quot;ROBOT2022: Fifth Iberian Robotics Conference&quot;,</div>
<div class="line">year=&quot;2023&quot;,</div>
<div class="line">publisher=&quot;Springer International Publishing&quot;,</div>
<div class="line">address=&quot;Cham&quot;,</div>
<div class="line">pages=&quot;528--539&quot;,</div>
<div class="line">abstract=&quot;State machines are a common mechanism for defining behaviors in robots where each behavior is based on identifiable stages. There are several libraries available for easing the implementation of state machines in ROS 1, however, the community was focused on SMACH or SMACC. Although these tools are still predominant, there are fewer alternatives for ROS 2. Besides, Behavior Trees are spreading fast, but there is a niche for using State Machines. Here, YASMIN is presented as yet another library specifically designed for ROS 2 for easing the design of robotic behaviors using state machines. It is available in C++ and Python, and provides some default states to speed up the development, in addition to a web viewer for monitoring the execution of the system and helping in the debugging.&quot;,</div>
<div class="line">isbn=&quot;978-3-031-21062-4&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line">@misc{yasmin,</div>
<div class="line">  doi = {10.48550/ARXIV.2205.13284},</div>
<div class="line">  url = {https://arxiv.org/abs/2205.13284},</div>
<div class="line">  author = {Gonzlez-Santamarta, Miguel ngel and Rodrguez-Lera, Francisco Javier and Llamas, Camino Fernndez and Rico, Francisco Martn and Olivera, Vicente Matelln},</div>
<div class="line">  keywords = {Robotics (cs.RO), FOS: Computer and information sciences, FOS: Computer and information sciences},</div>
<div class="line">  title = {YASMIN: Yet Another State MachINe library for ROS 2},</div>
<div class="line">  publisher = {arXiv},</div>
<div class="line">  year = {2022},</div>
<div class="line">  copyright = {Creative Commons Attribution Non Commercial No Derivatives 4.0 International}</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
